<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-snapjerk.html">snapjerk</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-snapjerk.html#~snapjerk">snapjerk</a></span></li>
</nav>

<div id="main">
    

    



    









    


    <section class="readme">
        <article><p align="center">
  <img src='https://raw.githubusercontent.com/cdaringe/webjerk/master/img/snapjerk_banner.png' alt='snapjerk-logo' />
</p>

<p><a href="https://standardjs.com"><img src="https://img.shields.io/badge/code_style-standard-brightgreen.svg" alt="JavaScript Style Guide"></a> <a href="https://app.codeship.com/projects/212005"> <img src="https://app.codeship.com/projects/c605af90-fd3d-0134-eab4-1aa2768960b8/status?branch=master" alt="Codeship Status for cdaringe/webjerk"></a></p>
<h1>snapjerk</h1><p>web application screenshot testing in docker.</p>
<p>snapjerk is a small script that wires together a few webjerk plugins.  it runs element-wise screenshot testing in real browsers in a docker container.</p>
<p>specifically, it:</p>
<ul>
<li>generates <a href="https://github.com/cdaringe/webjerk/tree/master/packages/webjerk-snaps">screenshots</a> of elements</li>
<li>compares captured shots from a reference set of shots with <a href="https://github.com/cdaringe/webjerk/tree/master/packages/webjerk-image-set-diff">webjerk-image-set-diff</a><ul>
<li>if no reference images are found, the first generated set are designated as references</li>
</ul>
</li>
<li>creates a <a href="https://github.com/cdaringe/webjerk/tree/master/packages/webjerk-image-set-diff-reporter">visual, interactive report</a> when differences detected</li>
</ul>
<p><img width="300px" src="https://raw.githubusercontent.com/cdaringe/webjerk/master/img/diff-report-demo.mov.gif" /></p>
<h2>usage</h2><h3>cli</h3><pre class="prettyprint source lang-bash"><code>ðŸ›° $ snapjerk --help

  web application screenshot testing in docker

  Usage
  // cli only execution
  $ snapjerk -s /path/to/static-site-directory -d '[{ selector: &quot;body&quot;, name: &quot;body&quot; }]' # json or js array

  // using a snapjerk.config.js
  $ snapjerk

  // use a custom config file
  $ snapjerk -c /path/to/snapjerk/config.js

  Options
  -s, --static &lt;directory>
  -c, --config &lt;filename>
  -d, --definitions &lt;snap-definitions></code></pre><h3>library</h3><p><a href="https://cdaringe.github.io/webjerk/">API documentation lives here</a>.</p>
<pre class="prettyprint source lang-js"><code>var snapjerk = require('snapjerk')
var conf = { ... } // see API docs
snapjerk(conf).then(...) // `snaps/` will be a dir with the result of `webjerk-snaps` within!</code></pre><h3>approving changes</h3><p>changes come in three forms:</p>
<ul>
<li>new images<ul>
<li>approve by setting <code>WEBJERK_ALLOW_NEW_IMAGES=1</code> in your env</li>
</ul>
</li>
<li>changed images<ul>
<li>approve changes by setting <code>WEBJERK_APPROVE_CHANGES=1</code> in your env</li>
</ul>
</li>
<li>removed images<ul>
<li>approve by simplying removing the images from your reference set</li>
<li>PRs to automate this would be great!</li>
</ul>
</li>
</ul>
<p>for more on the image diffing and approval processes, see (webjerk-image-set-diff)[https://github.com/cdaringe/webjerk/tree/master/packages/webjerk-image-set-diff].</p>
<h2>debug</h2><ul>
<li>set <code>DEBUG=webjerk*</code> to enable verbose logging</li>
<li><code>node --inspect-brk node_modules/.bin/snapjerk</code>, just like any other old node process :)</li>
</ul>
<h2>why?</h2><p>great options out there for testing visual diffs in browsers are slim.  i've
drawn the conclusion that most people roll their own image snap and comparison
solutions, or, bring in large swaths of dependencies and configuration to make
it all work.</p>
<p>this project aims to sceenshot testing really easy.  by easy, i mean:</p>
<ul>
<li>minimal dependencies</li>
<li>minimal configuration</li>
<li>small API surface</li>
<li>easy to debug &amp; hack on</li>
<li>host agnostic screenshots. different browsers on different boxes yield different visual rendering.  browsers in docker resolves that.</li>
</ul>
<p>the nearest thing to this project is  (BackstopJS)[https://github.com/garris/BackstopJS].  it's great!  it's more comprehensive
than this package, but also brings with it more complexity.  give it a shot if
snapjerk doesn't work out for you.</p>
<h2>arch</h2><p>just in case you cared to know.  happy hacking.</p>
<p><img src='https://raw.githubusercontent.com/cdaringe/webjerk/master/img/arch.png' alt='snapjerk-arch' /></p>
<ul>
<li><code>snapjerk</code> digests user config &amp; instantiates the <code>webjerk-snaps</code> plugin</li>
<li><code>snapjerk</code> registers the <code>webjerk-snaps</code> plugin instance with <code>webjerk</code>, and runs <code>webjerk</code></li>
<li><code>webjerk</code> runs the <code>main</code> and <code>post</code> hooks on <code>webjerk-snaps</code><ul>
<li><code>main</code> boots the browser in docker and takes screenshot</li>
<li><code>post</code> generates a diff report (optionally)</li>
</ul>
</li>
<li>unwind &amp; exit</li>
</ul>
<p>easy peasy.</p>
<h1>faq</h1><ul>
<li><em>&quot;what browsers are supported?&quot;</em><ul>
<li>ATM, <em>just chrome</em>.  this package used to support firefox, but in efforts to remove complexity and the overhead of selenium, it has been removed.<ul>
<li>we now use an adapter based strategy.</li>
</ul>
</li>
<li>PRs to make a firefox/<a href="https://github.com/laurentj/slimerjs">slimer</a>/etc adapter would be accepted!</li>
</ul>
</li>
<li><em>&quot;how do i navigate, or, do <some-action-in-the-browser> to get to the element i need to screenshot?&quot;</em><ul>
<li>see the <code>SnapsConfig.onPreSnap</code>/<code>SnapsConfig.onPostSnap</code> options</li>
</ul>
</li>
</ul></article>
    </section>






</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>